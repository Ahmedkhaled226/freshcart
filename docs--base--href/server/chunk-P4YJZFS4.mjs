import './polyfills.server.mjs';
import{a as m}from"./chunk-X6N7XFLZ.mjs";import{a as R}from"./chunk-KBWFD5YG.mjs";import{a as O}from"./chunk-JCNCNTQR.mjs";import"./chunk-GTSSCL6B.mjs";import"./chunk-JNO7ST2A.mjs";import{k as N,l as V}from"./chunk-NPX6L2HG.mjs";import{o as F}from"./chunk-Q2MC4KZB.mjs";import{Ab as d,Hb as l,Ib as g,Jb as b,Ma as y,Ob as P,Qa as s,Qb as w,Ub as T,Wb as I,Y as f,aa as D,gb as v,ib as x,ka as p,kb as k,la as _,mb as h,ob as B,pb as E,qb as o,rb as c,sb as u,vb as S,zb as C}from"./chunk-BPW7ZSEQ.mjs";import"./chunk-VVCT4QZE.mjs";var Y=(i,a)=>a.product.id,L=i=>["/details",i],M=i=>["/orders",i];function $(i,a){if(i&1){let n=S();o(0,"div",1)(1,"h2"),l(2,"Shop Cart"),c(),o(3,"button",3),C("click",function(){p(n);let t=d();return _(t.confirmBox(t.cartDetails._id))}),l(4,"Clear Cart"),c()()}}function j(i,a){i&1&&(o(0,"div",2),u(1,"img",4),c())}function A(i,a){if(i&1){let n=S();o(0,"div",6)(1,"div",8),u(2,"img",9),c(),o(3,"div",10)(4,"div")(5,"h3",11),l(6),c(),o(7,"p",12),l(8),T(9,"currency"),c(),o(10,"span",13),C("click",function(){let t=p(n).$implicit,r=d(2);return _(r.delete1(t.product.id))}),u(11,"i",14),l(12," Remove"),c()(),o(13,"div",15)(14,"a",16),C("click",function(){let t=p(n).$implicit,r=d(2);return _(r.updateCount(t.product.id,t.count+1))}),u(15,"i",17),c(),o(16,"span"),l(17),c(),o(18,"a",16),C("click",function(){let t=p(n).$implicit,r=d(2);return _(t.count>1&&r.updateCount(t.product.id,t.count-1))}),u(19,"i",18),c()()()()}if(i&2){let n=a.$implicit;s(),x("routerLink",w(11,L,n.product.id)),s(),x("src",n.product.imageCover,y)("alt",n.product.title),s(4),g(n.product.title),s(2),b("Price : ",I(9,8,n.price,"GBP"),""),s(9),g(n.count),s(),k("disabled",n.count<=1)}}function G(i,a){if(i&1&&(o(0,"button",7),l(1,"Orders"),c()),i&2){let n=d(2);x("routerLink",w(1,M,n.cartDetails._id))}}function U(i,a){if(i&1&&(o(0,"p",5),l(1),T(2,"currency"),c(),B(3,A,20,13,"div",6,Y),v(5,G,2,3,"button",7)),i&2){let n=d();s(),b("Total Cart Price : ",I(2,2,n.cartDetails.totalCartPrice,"GBP"),""),s(2),E(n.cartDetails.products),s(2),h(5,n.cartDetails.totalCartPrice>0?5:-1)}}var Z=(()=>{let a=class a{constructor(){this._CartService=f(R),this._ToastrService=f(O),this._Router=f(N),this.cartNum=0,this.cartDetails={}}ngOnInit(){this._CartService.getProductsCart().subscribe({next:e=>{this.num=e.numOfCartItems,this.cartDetails=e.data,this.cartNum=e.numOfCartItems},error:e=>{console.error(e)}})}deleteItem(e){this._CartService.deleteSpecificItem(e).subscribe({next:t=>{this.cartDetails=t.data,this.cartNum=t.numOfCartItems,t.numOfCartItems===0&&this.cartNum,this._ToastrService.warning("Item Deleted","FreshCart"),this._CartService.cartNumber.next(t.numOfCartItems)},error:t=>{console.error(t)}})}updateCount(e,t){t>0&&this._CartService.updateProductQuantity(e,t).subscribe({next:r=>{this.cartDetails=r.data,this.num=r.numOfCartItems,this._ToastrService.success("Update Item count","FreshCart")},error:r=>{console.error(r)}})}clearItems(){this._CartService.clearCart().subscribe({next:e=>{this.clearMsg=e.message,this.cartDetails={},this._ToastrService.warning("All Items Deleted","FreshCart"),this._CartService.cartNumber.next(0),setTimeout(()=>{this._Router.navigate(["/home"])},2e3),this.cartNum=0},error:e=>{console.error(e)}})}confirmBox(e){m.fire({title:"Are you sure ?",text:"You Want To Clear Your Cart!",icon:"warning",showCancelButton:!0,confirmButtonText:"Yes, clear it!",cancelButtonColor:"#ff0000",cancelButtonText:"No"}).then(t=>{t.value?m.fire("Deleted!","Your Cart is Clear .","success").then(()=>{this.clearItems()}):t.dismiss===m.DismissReason.cancel&&m.fire("Cancelled","","error")})}delete1(e){m.fire({title:"Are you sure ?",text:"You Want To Remove This Item!",icon:"warning",showCancelButton:!0,confirmButtonText:"Yes, remove it!",cancelButtonColor:"#ff0000",cancelButtonText:"No"}).then(t=>{t.value?m.fire("Deleted!","","success").then(()=>{this.deleteItem(e)}):t.dismiss===m.DismissReason.cancel&&m.fire("Cancelled","","error")})}};a.\u0275fac=function(t){return new(t||a)},a.\u0275cmp=D({type:a,selectors:[["app-cart"]],standalone:!0,features:[P],decls:4,vars:2,consts:[[1,"bg-nain-light","rounded-4","shadow","p-4","my-2","w-75","mx-auto"],[1,"d-flex","align-items-center","justify-content-between"],[1,"text-center"],[1,"btn","btn-outline-danger","btn-sm",3,"click"],["src","./assets/images/cartempty.avif","alt","",1,"w-100"],[1,"text-main"],[1,"row","mb-1","border-bottom"],[1,"btn-main","mt-2",3,"routerLink"],[1,"col-md-1","cr",3,"routerLink"],[1,"w-100",3,"src","alt"],[1,"col-md-11","d-flex","align-items-center","justify-content-between"],[1,"h5"],[1,"text-main","m-0"],[1,"text-danger","cr",3,"click"],[1,"fa-solid","fa-trash"],[1,"d-flex","align-items-center","gap-2"],[1,"text-main","cr",3,"click"],[1,"fa-solid","fa-circle-plus","fa-2xl"],[1,"fa-solid","fa-circle-minus","fa-2xl"]],template:function(t,r){t&1&&(o(0,"section",0),v(1,$,5,0,"div",1)(2,j,2,0,"div",2)(3,U,6,5),c()),t&2&&(s(),h(1,r.cartNum>0?1:-1),s(),h(2,r.clearMsg=="success"||r.cartNum===0||r.cartDetails.totalCartPrice===0?2:3))},dependencies:[F,V],styles:[".disabled[_ngcontent-%COMP%]{pointer-events:none;opacity:.5}"]});let i=a;return i})();export{Z as CartComponent};
