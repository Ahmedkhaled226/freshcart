import './polyfills.server.mjs';
import{a as M}from"./chunk-GDNTYSA2.mjs";import{a as D}from"./chunk-KBWFD5YG.mjs";import"./chunk-QZLY374Y.mjs";import{a as N,b as c,c as F,d as w,f as R,g as I,h as T,i as q,k as A}from"./chunk-URZKVRKB.mjs";import"./chunk-JNO7ST2A.mjs";import{h as O,k as x}from"./chunk-NPX6L2HG.mjs";import{j as E}from"./chunk-Q2MC4KZB.mjs";import{Ab as b,Hb as s,Ob as y,Qa as a,Rb as S,Y as m,aa as C,gb as f,ib as u,mb as g,qb as l,rb as i,sb as p,zb as v}from"./chunk-BPW7ZSEQ.mjs";import"./chunk-VVCT4QZE.mjs";var P=(n,o)=>({"is-invalid":n,"is-valid":o});function k(n,o){n&1&&(l(0,"p",14),s(1,"phone Is Required"),i())}function G(n,o){n&1&&(l(0,"p",14),s(1,"Enter Valid phone"),i())}function V(n,o){if(n&1&&(l(0,"div",8),f(1,k,2,0,"p",14)(2,G,2,0),i()),n&2){let h,e=b();a(),g(1,(h=e.orders.get("phone"))!=null&&h.getError("required")?1:(h=e.orders.get("phone"))!=null&&h.getError("pattern")?2:-1)}}var U=(()=>{let o=class o{constructor(){this._FormBuilder=m(q),this._ActivatedRoute=m(O),this._OrderService=m(M),this._Router=m(x),this._CartService=m(D),this.cartId="",this.orders=this._FormBuilder.group({details:[null,[c.required]],phone:[null,[c.required,c.pattern(/^01[0125][0-9]{8}$/)]],city:[null,[c.required]]})}ngOnInit(){this._ActivatedRoute.paramMap.subscribe({next:e=>{this.cartId=e.get("id")}})}ordersSubmit(){console.log(this.orders.value),this._OrderService.checkOut(this.cartId,this.orders.value).subscribe({next:e=>{e.status==="success"&&window.open(e.session.url,"_self")},error:e=>{console.log(e)}})}payCash(){this._OrderService.cashPay(this.cartId,this.orders.value).subscribe({next:e=>{e.status==="success"&&(this._Router.navigate(["/allorders"]),this._CartService.cartNumber.next(0))},error:e=>{console.log(e)}})}};o.\u0275fac=function(_){return new(_||o)},o.\u0275cmp=C({type:o,selectors:[["app-orders"]],standalone:!0,features:[y],decls:23,vars:8,consts:[[1,"bg-main-light","rounded-4","shadow","my-2","p-2","w-75","mx-auto"],[1,"text-center"],[3,"ngSubmit","formGroup"],[1,"my-2"],["for","details"],["formControlName","details","id","details","placeholder","more details ..................",1,"form-control"],["for","phone"],["id","phone","type","tel","formControlName","phone",1,"form-control",3,"ngClass"],[1,"alert","alert-danger","w-50"],["for","city"],["formControlName","city","id","city",1,"form-control"],["type","button",1,"btn-main","m-3","medium",3,"click","disabled"],["type","submit",1,"btn-main","m-3","medium",3,"disabled"],["src","../../../assets/images/mastercard.webp","alt","",1,"text1"],[1,"m-0"]],template:function(_,t){if(_&1&&(l(0,"section",0)(1,"h1",1),s(2,"ShippingAddress"),i(),l(3,"form",2),v("ngSubmit",function(){return t.ordersSubmit()}),l(4,"div",3)(5,"label",4),s(6,"Details"),i(),p(7,"textarea",5),i(),l(8,"div",3)(9,"label",6),s(10,"Phone"),i(),p(11,"input",7),f(12,V,3,1,"div",8),i(),l(13,"div",3)(14,"label",9),s(15,"City"),i(),p(16,"input",10),i(),l(17,"div",1)(18,"button",11),v("click",function(){return t.payCash()}),s(19,"Pay Cash"),i(),l(20,"button",12),s(21,"Online Payment "),p(22,"img",13),i()()()()),_&2){let r,d;a(3),u("formGroup",t.orders),a(8),u("ngClass",S(5,P,((r=t.orders.get("phone"))==null?null:r.errors)&&(((r=t.orders.get("phone"))==null?null:r.touched)||((r=t.orders.get("phone"))==null?null:r.dirty)),!((r=t.orders.get("phone"))!=null&&r.errors)&&(((r=t.orders.get("phone"))==null?null:r.touched)||((r=t.orders.get("phone"))==null?null:r.dirty)))),a(),g(12,(d=t.orders.get("phone"))!=null&&d.errors&&((d=t.orders.get("phone"))!=null&&d.touched||(d=t.orders.get("phone"))!=null&&d.dirty)?12:-1),a(6),u("disabled",t.orders.invalid),a(2),u("disabled",t.orders.invalid)}},dependencies:[A,R,N,F,w,I,T,E],styles:[".text1[_ngcontent-%COMP%]{width:45px}"]});let n=o;return n})();export{U as OrdersComponent};
