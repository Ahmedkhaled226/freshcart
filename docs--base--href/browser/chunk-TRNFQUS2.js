import{a as q,b as H}from"./chunk-FACQ7XCB.js";import{a as U}from"./chunk-M6FYKKAR.js";import{l as R}from"./chunk-E3LQUSMD.js";import{a as z,c as D,e as j,j as J}from"./chunk-7ZDBFGLU.js";import{a as G}from"./chunk-KVL45CIA.js";import{a as $}from"./chunk-ZGRWIGMM.js";import"./chunk-YXX363XN.js";import{h as V}from"./chunk-VMUYEW3F.js";import{h as B,m as O}from"./chunk-QNXCJ3HQ.js";import{$ as P,Eb as c,Fb as p,Hb as E,Ib as L,Ja as y,Jb as k,Lb as M,Mb as A,Na as a,Nb as I,Ob as N,Rb as _,Tb as f,Y as d,db as b,fb as u,ja as S,jb as T,ka as v,kb as W,lb as x,mb as C,nb as o,ob as s,pb as m,sb as F,wb as w,xb as h}from"./chunk-G3L4KF65.js";import"./chunk-CWTPBX7D.js";var K=(i,r)=>r.id,Q=i=>["/details",i],X=()=>[1,2,3,4,5],Y=(i,r)=>({"text-danger":i,"text-muted":r});function Z(i,r){i&1&&(o(0,"span"),m(1,"i",16),s())}function ee(i,r){i&1&&(o(0,"span"),m(1,"i",17),s())}function te(i,r){if(i&1){let n=F();o(0,"div",5)(1,"div",6)(2,"div",7),m(3,"img",8),o(4,"h3",9),c(5),s(),o(6,"h4",10),c(7),_(8,"split"),s(),o(9,"div",11)(10,"span"),c(11),_(12,"currency"),s(),o(13,"div"),x(14,Z,2,0,"span",null,W),b(16,ee,2,0,"span"),o(17,"span",12),c(18),s()()()(),o(19,"button",13),w("click",function(){let t=S(n).$implicit,l=h();return v(l.addWishList(t.id))}),m(20,"i",14),s(),o(21,"button",15),w("click",function(){let t=S(n).$implicit,l=h();return v(l.addCart(t.id))}),c(22,"Add To Cart"),s()()()}if(i&2){let n=r.$implicit,e=h();a(2),u("routerLink",I(15,Q,n.id)),a(),u("src",n.imageCover,y)("alt",n.title),a(2),p(n.category.name),a(2),p(f(8,9,n.title,2)),a(4),p(f(12,12,n.price,"EGP")),a(3),C(A(17,X).slice(0,n.ratingsAverage)),a(2),T(16,n.ratingsAverage%1!==0?16:-1),a(2),p(n.ratingsAverage),a(2),u("ngClass",N(18,Y,e.wishlist.has(n.id),!e.wishlist.has(n.id)))}}var fe=(()=>{let r=class r{constructor(){this._ProductsService=d(U),this._CartService=d($),this._ToastrService=d(R),this._WishlistService=d(G),this.allProduct=[],this.text="",this.wishlist=new Set,this.loadWishlistFromLocalStorage()}ngOnInit(){this._ProductsService.getAllProducts().subscribe({next:e=>{this.allProduct=e.data},error:e=>{console.error(e)}})}addCart(e){this._CartService.addProductToCart(e).subscribe({next:t=>{this._ToastrService.success(t.message,"FreshCart"),this._CartService.cartNumber.next(t.numOfCartItems)},error:t=>{console.log(t)}})}addWishList(e){this.wishlist.has(e)?this._WishlistService.deleteItemWish(e).subscribe({next:t=>{this._ToastrService.success("Removed from Wishlist \u{1F494}"),this.wishlist.delete(e),this.saveWishlistToLocalStorage()},error:t=>{console.error(t)}}):this._WishlistService.addToWishList(e).subscribe({next:t=>{this._ToastrService.success("It has been successfully added. \u2764\uFE0F"),this.wishlist.add(e),this.saveWishlistToLocalStorage()},error:t=>{console.error(t)}})}saveWishlistToLocalStorage(){localStorage.setItem("wishlist",JSON.stringify(Array.from(this.wishlist)))}loadWishlistFromLocalStorage(){let e=localStorage.getItem("wishlist");e&&(this.wishlist=new Set(JSON.parse(e)))}};r.\u0275fac=function(t){return new(t||r)},r.\u0275cmp=P({type:r,selectors:[["app-product"]],standalone:!0,features:[M],decls:9,vars:4,consts:[["type","search","placeholder","Search By Name",1,"form-control","w-50","mx-auto","my-2",3,"ngModelChange","ngModel"],[1,"pb-5"],[1,"text-center","text-main","m-3"],[1,"container"],[1,"row","g-4"],[1,"col-lg-3","col-md-6","col-sm-12"],[1,"product","p-2","position-relative"],[3,"routerLink"],[1,"w-100",3,"src","alt"],[1,"small","text-main"],[1,"h6"],[1,"d-flex","justify-content-between","align-items-center"],[1,"text-muted"],[1,"wishlist-icon","position-absolute","top-0","end-0","border-0","bg-transparent","p-2",3,"click"],[1,"fa-solid","fa-heart","fa-2xl","icon1",3,"ngClass"],[1,"btn","btn-main","w-100",3,"click"],[1,"fas","fa-star","rating-color"],[1,"fas","fa-star-half-alt","rating-color"]],template:function(t,l){t&1&&(o(0,"input",0),k("ngModelChange",function(g){return L(l.text,g)||(l.text=g),g}),s(),o(1,"section",1)(2,"h2",2),c(3,"Popular Products"),s(),o(4,"div",3)(5,"div",4),x(6,te,23,21,"div",5,K),_(8,"search"),s()()()),t&2&&(E("ngModel",l.text),a(6),C(f(8,1,l.allProduct,l.text)))},dependencies:[V,O,q,H,J,z,D,j,B],styles:["i[_ngcontent-%COMP%]{font-size:14px}.icon1[_ngcontent-%COMP%]{font-size:25px}"]});let i=r;return i})();export{fe as ProductComponent};
