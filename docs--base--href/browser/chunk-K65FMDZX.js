import{a as L}from"./chunk-KPF7A2VU.js";import{l as O}from"./chunk-E3LQUSMD.js";import{a as R}from"./chunk-ZGRWIGMM.js";import"./chunk-YXX363XN.js";import{g as N,h as V}from"./chunk-VMUYEW3F.js";import{m as F}from"./chunk-QNXCJ3HQ.js";import{$ as D,Eb as l,Fb as g,Gb as b,Ja as y,Lb as P,Na as s,Nb as w,Rb as T,Tb as I,Y as f,db as v,fb as x,hb as k,ja as p,jb as h,ka as _,lb as B,mb as E,nb as o,ob as c,pb as u,sb as S,wb as C,xb as d}from"./chunk-G3L4KF65.js";import{e as Y}from"./chunk-CWTPBX7D.js";var m=Y(L());var M=(i,a)=>a.product.id,$=i=>["/details",i],j=i=>["/orders",i];function A(i,a){if(i&1){let n=S();o(0,"div",1)(1,"h2"),l(2,"Shop Cart"),c(),o(3,"button",3),C("click",function(){p(n);let t=d();return _(t.confirmBox(t.cartDetails._id))}),l(4,"Clear Cart"),c()()}}function G(i,a){i&1&&(o(0,"div",2),u(1,"img",4),c())}function U(i,a){if(i&1){let n=S();o(0,"div",6)(1,"div",8),u(2,"img",9),c(),o(3,"div",10)(4,"div")(5,"h3",11),l(6),c(),o(7,"p",12),l(8),T(9,"currency"),c(),o(10,"span",13),C("click",function(){let t=p(n).$implicit,r=d(2);return _(r.delete1(t.product.id))}),u(11,"i",14),l(12," Remove"),c()(),o(13,"div",15)(14,"a",16),C("click",function(){let t=p(n).$implicit,r=d(2);return _(r.updateCount(t.product.id,t.count+1))}),u(15,"i",17),c(),o(16,"span"),l(17),c(),o(18,"a",16),C("click",function(){let t=p(n).$implicit,r=d(2);return _(t.count>1&&r.updateCount(t.product.id,t.count-1))}),u(19,"i",18),c()()()()}if(i&2){let n=a.$implicit;s(),x("routerLink",w(11,$,n.product.id)),s(),x("src",n.product.imageCover,y)("alt",n.product.title),s(4),g(n.product.title),s(2),b("Price : ",I(9,8,n.price,"GBP"),""),s(9),g(n.count),s(),k("disabled",n.count<=1)}}function W(i,a){if(i&1&&(o(0,"button",7),l(1,"Orders"),c()),i&2){let n=d(2);x("routerLink",w(1,j,n.cartDetails._id))}}function z(i,a){if(i&1&&(o(0,"p",5),l(1),T(2,"currency"),c(),B(3,U,20,13,"div",6,M),v(5,W,2,3,"button",7)),i&2){let n=d();s(),b("Total Cart Price : ",I(2,2,n.cartDetails.totalCartPrice,"GBP"),""),s(2),E(n.cartDetails.products),s(2),h(5,n.cartDetails.totalCartPrice>0?5:-1)}}var tt=(()=>{let a=class a{constructor(){this._CartService=f(R),this._ToastrService=f(O),this._Router=f(N),this.cartNum=0,this.cartDetails={}}ngOnInit(){this._CartService.getProductsCart().subscribe({next:e=>{this.num=e.numOfCartItems,this.cartDetails=e.data,this.cartNum=e.numOfCartItems},error:e=>{console.error(e)}})}deleteItem(e){this._CartService.deleteSpecificItem(e).subscribe({next:t=>{this.cartDetails=t.data,this.cartNum=t.numOfCartItems,t.numOfCartItems===0&&this.cartNum,this._ToastrService.warning("Item Deleted","FreshCart"),this._CartService.cartNumber.next(t.numOfCartItems)},error:t=>{console.error(t)}})}updateCount(e,t){t>0&&this._CartService.updateProductQuantity(e,t).subscribe({next:r=>{this.cartDetails=r.data,this.num=r.numOfCartItems,this._ToastrService.success("Update Item count","FreshCart")},error:r=>{console.error(r)}})}clearItems(){this._CartService.clearCart().subscribe({next:e=>{this.clearMsg=e.message,this.cartDetails={},this._ToastrService.warning("All Items Deleted","FreshCart"),this._CartService.cartNumber.next(0),setTimeout(()=>{this._Router.navigate(["/home"])},2e3),this.cartNum=0},error:e=>{console.error(e)}})}confirmBox(e){m.default.fire({title:"Are you sure ?",text:"You Want To Clear Your Cart!",icon:"warning",showCancelButton:!0,confirmButtonText:"Yes, clear it!",cancelButtonColor:"#ff0000",cancelButtonText:"No"}).then(t=>{t.value?m.default.fire("Deleted!","Your Cart is Clear .","success").then(()=>{this.clearItems()}):t.dismiss===m.default.DismissReason.cancel&&m.default.fire("Cancelled","","error")})}delete1(e){m.default.fire({title:"Are you sure ?",text:"You Want To Remove This Item!",icon:"warning",showCancelButton:!0,confirmButtonText:"Yes, remove it!",cancelButtonColor:"#ff0000",cancelButtonText:"No"}).then(t=>{t.value?m.default.fire("Deleted!","","success").then(()=>{this.deleteItem(e)}):t.dismiss===m.default.DismissReason.cancel&&m.default.fire("Cancelled","","error")})}};a.\u0275fac=function(t){return new(t||a)},a.\u0275cmp=D({type:a,selectors:[["app-cart"]],standalone:!0,features:[P],decls:4,vars:2,consts:[[1,"bg-nain-light","rounded-4","shadow","p-4","my-2","w-75","mx-auto"],[1,"d-flex","align-items-center","justify-content-between"],[1,"text-center"],[1,"btn","btn-outline-danger","btn-sm",3,"click"],["src","./assets/images/cartempty.avif","alt","",1,"w-100"],[1,"text-main"],[1,"row","mb-1","border-bottom"],[1,"btn-main","mt-2",3,"routerLink"],[1,"col-md-1","cr",3,"routerLink"],[1,"w-100",3,"src","alt"],[1,"col-md-11","d-flex","align-items-center","justify-content-between"],[1,"h5"],[1,"text-main","m-0"],[1,"text-danger","cr",3,"click"],[1,"fa-solid","fa-trash"],[1,"d-flex","align-items-center","gap-2"],[1,"text-main","cr",3,"click"],[1,"fa-solid","fa-circle-plus","fa-2xl"],[1,"fa-solid","fa-circle-minus","fa-2xl"]],template:function(t,r){t&1&&(o(0,"section",0),v(1,A,5,0,"div",1)(2,G,2,0,"div",2)(3,z,6,5),c()),t&2&&(s(),h(1,r.cartNum>0?1:-1),s(),h(2,r.clearMsg=="success"||r.cartNum===0||r.cartDetails.totalCartPrice===0?2:3))},dependencies:[F,V],styles:[".disabled[_ngcontent-%COMP%]{pointer-events:none;opacity:.5}"]});let i=a;return i})();export{tt as CartComponent};
