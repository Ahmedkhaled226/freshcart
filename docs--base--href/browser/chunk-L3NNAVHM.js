import{a as G}from"./chunk-GHJTSJIE.js";import"./chunk-G5KA7DMQ.js";import{l as B}from"./chunk-E3LQUSMD.js";import{a as N,b as f,c as A,d as R,f as k,g as q,h as D,i as V,k as x}from"./chunk-7ZDBFGLU.js";import"./chunk-YXX363XN.js";import{g as T,h as b}from"./chunk-VMUYEW3F.js";import{h as L}from"./chunk-QNXCJ3HQ.js";import{$ as w,Eb as u,Lb as y,Na as s,Ob as S,Y as _,db as p,fb as h,jb as c,nb as r,ob as n,pb as v,wb as E,xb as C}from"./chunk-G3L4KF65.js";import"./chunk-CWTPBX7D.js";var I=(e,t)=>({"is-invalid":e,"is-valid":t});function M(e,t){e&1&&(r(0,"p",11),u(1,"Email Is Required"),n())}function P(e,t){e&1&&(r(0,"p",11),u(1,"Enter Valid Email"),n())}function j(e,t){if(e&1&&(r(0,"div",5),p(1,M,2,0,"p",11)(2,P,2,0),n()),e&2){let m,o=C();s(),c(1,(m=o.loginForm.get("email"))!=null&&m.getError("required")?1:(m=o.loginForm.get("email"))!=null&&m.getError("email")?2:-1)}}function U(e,t){e&1&&(r(0,"p",11),u(1,"Password Is Required"),n())}function $(e,t){e&1&&(r(0,"p",11),u(1,"Enter Valid password"),n())}function z(e,t){if(e&1&&(r(0,"div",5),p(1,U,2,0,"p",11)(2,$,2,0),n()),e&2){let m,o=C();s(),c(1,(m=o.loginForm.get("password"))!=null&&m.getError("required")?1:(m=o.loginForm.get("password"))!=null&&m.getError("pattern")?2:-1)}}function H(e,t){e&1&&(r(0,"span"),v(1,"i",12),n())}var ie=(()=>{let t=class t{constructor(){this._AuthService=_(G),this._FormBuilder=_(V),this._Router=_(T),this._ToastrService=_(B),this.isLoading=!1,this.loginForm=this._FormBuilder.group({email:[null,[f.required,f.email]],password:[null,[f.required,f.pattern(/^\w{6,}$/)]]})}loginSubmit(){this.loginForm.valid?(this.isLoading=!0,this._AuthService.setloginForm(this.loginForm.value).subscribe({next:o=>{o.message=="success"&&(this._ToastrService.success(o.message,"FreshCart"),setTimeout(()=>{localStorage.setItem("userToken",o.token),this._AuthService.saveUserData,this._Router.navigate(["/home"])},1e3)),this.isLoading=!1},error:o=>{this.isLoading=!1,console.log(o)}})):(this.loginForm.setErrors({mismatch:!0}),this.loginForm.markAllAsTouched())}};t.\u0275fac=function(F){return new(F||t)},t.\u0275cmp=w({type:t,selectors:[["app-login"]],standalone:!0,features:[y],decls:18,vars:12,consts:[[1,"bg-main-light","shadow","p-2","my-2","rounded-4"],[3,"ngSubmit","formGroup"],[1,"my-2"],["for","email"],["id","email","type","email","formControlName","email",1,"form-control",3,"ngClass"],[1,"alert","alert-danger","w-50"],["for","password"],["id","password","type","password","formControlName","password",1,"form-control",3,"ngClass"],[1,"d-flex","align-items-center","justify-content-end","gap-4"],["routerLink","/forgot",1,"link-primary"],["type","submit",1,"btn-main"],[1,"m-0"],[1,"fas","fa-spin","fa-spinner"]],template:function(F,i){if(F&1&&(r(0,"section",0)(1,"form",1),E("ngSubmit",function(){return i.loginSubmit()}),r(2,"div",2)(3,"label",3),u(4,"Email"),n(),v(5,"input",4),p(6,j,3,1,"div",5),n(),r(7,"div",2)(8,"label",6),u(9,"Password"),n(),v(10,"input",7),p(11,z,3,1,"div",5),n(),r(12,"div",8)(13,"a",9),u(14,"Forgot Password"),n(),r(15,"button",10),u(16,"login "),p(17,H,2,0,"span"),n()()()()),F&2){let l,d,a,g;s(),h("formGroup",i.loginForm),s(4),h("ngClass",S(6,I,((l=i.loginForm.get("email"))==null?null:l.errors)&&(((l=i.loginForm.get("email"))==null?null:l.touched)||((l=i.loginForm.get("email"))==null?null:l.dirty)),!((l=i.loginForm.get("email"))!=null&&l.errors)&&(((l=i.loginForm.get("email"))==null?null:l.touched)||((l=i.loginForm.get("email"))==null?null:l.dirty)))),s(),c(6,(d=i.loginForm.get("email"))!=null&&d.errors&&((d=i.loginForm.get("email"))!=null&&d.touched||(d=i.loginForm.get("email"))!=null&&d.dirty)?6:-1),s(4),h("ngClass",S(9,I,((a=i.loginForm.get("password"))==null?null:a.errors)&&(((a=i.loginForm.get("password"))==null?null:a.touched)||((a=i.loginForm.get("password"))==null?null:a.dirty)),!((a=i.loginForm.get("password"))!=null&&a.errors)&&(((a=i.loginForm.get("password"))==null?null:a.touched)||((a=i.loginForm.get("password"))==null?null:a.dirty)))),s(),c(11,(g=i.loginForm.get("password"))!=null&&g.errors&&((g=i.loginForm.get("password"))!=null&&g.touched||(g=i.loginForm.get("password"))!=null&&g.dirty)?11:-1),s(6),c(17,i.isLoading?17:-1)}},dependencies:[x,k,N,A,R,q,D,L,b]});let e=t;return e})();export{ie as LoginComponent};
