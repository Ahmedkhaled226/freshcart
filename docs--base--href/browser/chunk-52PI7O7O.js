import{a as G}from"./chunk-GHJTSJIE.js";import"./chunk-G5KA7DMQ.js";import{a as y,b as a,c as E,d as F,f as V,g as P,h as N,i as T,k as A}from"./chunk-7ZDBFGLU.js";import"./chunk-YXX363XN.js";import{g as b}from"./chunk-VMUYEW3F.js";import"./chunk-QNXCJ3HQ.js";import{$ as w,Eb as l,Lb as x,Na as u,Y as c,db as S,fb as m,ja as f,jb as h,ka as _,nb as r,ob as i,pb as p,sb as C,wb as v,xb as d}from"./chunk-G3L4KF65.js";import"./chunk-CWTPBX7D.js";function B(o,s){if(o&1){let t=C();r(0,"form",2),v("ngSubmit",function(){f(t);let n=d();return _(n.verifyEmailSubmit())}),r(1,"div",3)(2,"label",4),l(3,"Email:"),i(),p(4,"input",5),i(),r(5,"button",6),l(6," Verify Email"),i()()}if(o&2){let t=d();m("formGroup",t.verifyEmail),u(5),m("disabled",t.verifyEmail.invalid)}}function D(o,s){if(o&1){let t=C();r(0,"form",2),v("ngSubmit",function(){f(t);let n=d();return _(n.verifyCodeSubmit())}),r(1,"div",3)(2,"label",7),l(3,"resetCode:"),i(),p(4,"input",8),i(),r(5,"button",6),l(6," Verify Code"),i()()}if(o&2){let t=d();m("formGroup",t.verifyCode),u(5),m("disabled",t.verifyCode.invalid)}}function R(o,s){if(o&1){let t=C();r(0,"form",2),v("ngSubmit",function(){f(t);let n=d();return _(n.resetPasswordSubmit())}),r(1,"div",3)(2,"label",4),l(3,"Email:"),i(),p(4,"input",5),i(),r(5,"div",3)(6,"label",9),l(7,"newPassword:"),i(),p(8,"input",10),i(),r(9,"button",6),l(10," Confirm"),i()()}if(o&2){let t=d();m("formGroup",t.resetPassword),u(9),m("disabled",t.resetPassword.invalid)}}var z=(()=>{let s=class s{constructor(){this._AuthService=c(G),this._Router=c(b),this.step=1,this._FormBuilder=c(T),this.verifyEmail=this._FormBuilder.group({email:[null,[a.required,a.email]]}),this.verifyCode=this._FormBuilder.group({resetCode:[null,[a.required,a.pattern(/^[0-9]{6}$/)]]}),this.resetPassword=this._FormBuilder.group({email:[null,[a.required,a.email]],newPassword:[null,[a.required,a.pattern(/^\w{6,}$/)]]})}verifyEmailSubmit(){this._AuthService.setEmailVerify(this.verifyEmail.value).subscribe({next:e=>{console.log(e),e.statusMsg==="success"&&(this.step=2)},error:e=>{console.log(e)}})}verifyCodeSubmit(){this._AuthService.setCodeVerify(this.verifyCode.value).subscribe({next:e=>{console.log(e),e.status==="Success"&&(this.step=3)},error:e=>{console.log(e)}})}resetPasswordSubmit(){this._AuthService.setResetPass(this.resetPassword.value).subscribe({next:e=>{console.log(e),localStorage.setItem("userToken",e.token),this._AuthService.saveUserData(),this._Router.navigate(["/home"])},error:e=>{console.log(e)}})}};s.\u0275fac=function(n){return new(n||s)},s.\u0275cmp=w({type:s,selectors:[["app-forgotpassword"]],standalone:!0,features:[x],decls:6,vars:1,consts:[[1,"text-center","text-main","my-2"],[1,"bg-main-light","rounded-4","shadow","p-3",3,"formGroup"],[1,"bg-main-light","rounded-4","shadow","p-3",3,"ngSubmit","formGroup"],[1,"my-2"],["for","email"],["type","email","id","email","formControlName","email",1,"form-control"],[1,"btn-main",3,"disabled"],["for","resetCode"],["type","text","id","resetCode","formControlName","resetCode",1,"form-control"],["for","newPassword"],["type","password","id","newPassword","formControlName","newPassword",1,"form-control"]],template:function(n,g){n&1&&(r(0,"section")(1,"h1",0),l(2,"Forgot Password"),i(),S(3,B,7,2,"form",1)(4,D,7,2)(5,R,11,2),i()),n&2&&(u(3),h(3,g.step==1?3:g.step==2?4:g.step==3?5:-1))},dependencies:[A,V,y,E,F,P,N]});let o=s;return o})();export{z as ForgotpasswordComponent};
